<script>
        const navLinks = document.querySelectorAll('.nav-links a');
        const mainContent = document.getElementById('main-content');
        const defaultTitle = 'Bem-vindo(a)';

        // =========================================
        // NOVO: Detalhes das Especialidades
        // =========================================
        const specialityDetails = {
            'ginecologia': {
                nome: 'Ginecologia',
                publico: 'Área exclusiva para mulheres.',
                preparo: 'Exige preparo específico antes da consulta.',
                exames: 'Realiza exames no local.',
                cor: '#e38499' // Cor de destaque suave
            },
            'cardiologia': {
                nome: 'Cardiologia',
                publico: 'Área para todos os gêneros e idades.',
                preparo: 'Não exige preparo prévio.',
                exames: 'Solicita exames individuais em laboratórios.',
                cor: '#dc3545' // Cor de destaque forte
            },
            'geral': {
                nome: 'Clínica Geral',
                publico: 'Área para todos os gêneros e idades.',
                preparo: 'Não exige preparo prévio.',
                exames: 'Foca em pedido de exames e orientação inicial.',
                cor: '#8ACDA8' // Cor de destaque padrão
            },
            'pediatria': {
                nome: 'Pediatria',
                publico: 'Área para Crianças de 0 meses até 12 anos.',
                preparo: 'Não precisa de preparo específico.',
                exames: 'Realiza exames e triagem no local.',
                cor: '#3498db' // Cor de destaque azul
            }
        };


        const pageContent = {
            // ... (Sobre, Fale Conosco, Avaliação, Receita permanecem os mesmos) ...
            'sobre': { /* ... */ },
            'fale-conosco': { /* ... */ },
            'agenda': {
                title: 'Agenda de Consultas',
                // Adicionei um placeholder vazio para o detalhe da especialidade
                html: `
                    <p>Utilize o formulário abaixo para marcar ou buscar horários.</p>
                    <div class="content-grid" id="agenda-content-grid">
                        <div class="info-card" style="grid-column: 1 / -1;"> 
                            <h3>Agendamento Rápido</h3>
                            <form id="appointment-form">
                                <label for="especialidade">Especialidade:</label>
                                <select id="especialidade" name="especialidade" style="max-width: 300px;">
                                    <option value="">Selecione a Especialidade</option>
                                    <option value="pediatria">Pediatria</option>
                                    <option value="ginecologia">Ginecologia</option>
                                    <option value="cardiologia">Cardiologia</option>
                                    <option value="psiquiatria">Psiquiatria</option>
                                    <option value="geral">Clínica Geral</option>
                                </select><br>

                                <label style="margin-top: 15px; display: block;">Escolha o Médico (Clique na foto para dar zoom):</label>
                                <div class="doctor-selection">
                                    <div class="doctor-card" data-medico="joao_santos" data-especialidade="cardiologia">
                                        <img src="joao.jpg" alt="Dr. João Santos">
                                        <p>Dr. João Santos (Cardiologia)</p>
                                    </div>
                                    <div class="doctor-card" data-medico="ana_silva" data-especialidade="pediatria">
                                        <img src="ana.jpg" alt="Dra. Ana Silva">
                                        <p>Dra. Ana Silva (Pediatria)</p>
                                    </div>
                                    <div class="doctor-card" data-medico="maria_oliveira" data-especialidade="ginecologia">
                                        <img src="maria.jpg" alt="Dra. Maria Oliveira">
                                        <p>Dra. Maria Oliveira (Ginecologia)</p>
                                    </div>
                                </div>

                                <label for="data">Escolha a Data:</label>
                                <input type="date" id="data" name="data" style="max-width: 300px;"><br>

                                <button type="submit">Buscar Horários Disponíveis</button>
                            </form>
                        </div>
                        <div id="speciality-details-container" style="grid-column: 1 / -1;">
                            </div>
                    </div>
                `
            },
            'avaliacao': { /* ... */ },
            'receita': { /* ... */ }
        };

        function loadPageContent(pageId) {
            // ... (Função inalterada) ...
        }
        
        // =========================================
        // NOVO: Função para exibir os detalhes da especialidade
        // =========================================
        function displaySpecialityDetails(specialtyId) {
            const container = document.getElementById('speciality-details-container');
            const details = specialityDetails[specialtyId];

            if (!details || specialtyId === '') {
                container.innerHTML = '';
                return;
            }

            // Define um estilo de cartão para os detalhes da especialidade
            container.innerHTML = `
                <div class="info-card speciality-info" style="border-top-color: ${details.cor};">
                    <h3>Detalhes da Especialidade: ${details.nome}</h3>
                    <div class="content-grid" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));">
                        <p><strong>Público:</strong> ${details.publico}</p>
                        <p><strong>Preparo:</strong> ${details.preparo}</p>
                        <p><strong>Exames:</strong> ${details.exames}</p>
                    </div>
                </div>
            `;
        }


        function setupDoctorSelection() {
            const doctorCards = document.querySelectorAll('.doctor-card');
            const specialitySelect = document.getElementById('especialidade');
            
            doctorCards.forEach(card => {
                const img = card.querySelector('img'); 

                // 1. Lógica de seleção do cartão (AGORA ATUALIZA OS DETALHES)
                card.addEventListener('click', () => {
                    doctorCards.forEach(c => c.classList.remove('selected'));
                    card.classList.add('selected');
                    
                    const selectedSpecialty = card.getAttribute('data-especialidade');
                    specialitySelect.value = selectedSpecialty;
                    
                    // NOVO: Exibe os detalhes
                    displaySpecialityDetails(selectedSpecialty); 
                });

                // 2. Lógica de zoom ao clicar na IMAGEM (Inalterada)
                img.addEventListener('click', (event) => {
                    // ... (código do zoom) ...
                });
            });

            // 3. Lógica de filtro por especialidade (AGORA ATUALIZA OS DETALHES)
            specialitySelect.addEventListener('change', () => {
                const selectedSpecialty = specialitySelect.value;
                
                doctorCards.forEach(card => {
                    // ... (código de filtro) ...
                });
                
                // NOVO: Exibe os detalhes
                displaySpecialityDetails(selectedSpecialty); 
            });
        }
        
        // ... (O restante das funções de listeners e eventos de load/popstate permanecem as mesmas)
    </script>